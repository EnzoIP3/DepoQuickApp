import{d as N}from"./chunk-CV257ZC2.js";import{a as R}from"./chunk-CPWWQRJC.js";import{c as P,f as I}from"./chunk-MQS2OHBC.js";import"./chunk-TDDMEX7Y.js";import{e as D}from"./chunk-QQ367BQP.js";import"./chunk-6ZQIWECF.js";import"./chunk-P47V3DL4.js";import{a as y}from"./chunk-U64QIMIT.js";import"./chunk-XPYDWX67.js";import"./chunk-3VIG4VHP.js";import{Aa as b,Cb as _,L as a,V as f,a as s,aa as l,ab as g,ba as m,ca as d,ha as M,o as v,s as n,t as u}from"./chunk-2GDBKQSI.js";var r=class t{constructor(i,e){this._devicesService=i;this._messagesService=e}columns=[{field:"mainPhoto",header:"Photo"},{field:"secondaryPhotos",header:"Other Photos"},{field:"name",header:"Name"},{field:"businessName",header:"Business Name"},{field:"type",header:"Type"},{field:"modelNumber",header:"Model Number"}];filterableColumns=["name","type","modelNumber","businessName"];_devicesSubscription=null;devices=[];pagination=null;filters={};loading=!0;selectedDevice=null;dialogVisible=!1;ngOnInit(){this._subscribeToDevices()}onPageChange(i){this.loading=!0,this._subscribeToDevices(s(s({},i),this.filters))}onFilterChange(i){this.filters=i,this._subscribeToDevices(s(s({},this.pagination),i))}ngOnDestroy(){this._devicesSubscription?.unsubscribe()}_subscribeToDevices(i){this._devicesSubscription=this._devicesService.getDevices(i?s({},i):{}).subscribe({next:e=>{this.devices=e.devices,this.pagination=e.pagination,this.loading=!1},error:e=>{this.loading=!1,this._messagesService.add({severity:"error",summary:"Error",detail:e.message})}})}onRowClick(i){this.selectedDevice=i}static \u0275fac=function(e){return new(e||t)(a(I),a(y))};static \u0275cmp=n({type:t,selectors:[["app-devices-table"]],standalone:!0,features:[b],decls:1,vars:7,consts:[[3,"rowClick","pageChange","filterChange","clickableRows","columns","devices","loading","pagination","filterableColumns","selectedDevice"]],template:function(e,o){e&1&&(l(0,"app-base-devices-table",0),M("rowClick",function(p){return o.onRowClick(p)})("pageChange",function(p){return o.onPageChange(p)})("filterChange",function(p){return o.onFilterChange(p)}),m()),e&2&&f("clickableRows",!0)("columns",o.columns)("devices",o.devices)("loading",o.loading)("pagination",o.pagination)("filterableColumns",o.filterableColumns)("selectedDevice",o.selectedDevice)},dependencies:[g,N],encapsulation:2})};var c=class t{constructor(i,e){this._deviceTypesService=i;this._messagesService=e}columns=[{field:"type",header:"Type"}];_deviceTypesSubscription=null;deviceTypes=[];loading=!0;ngOnInit(){this._deviceTypesSubscription=this._deviceTypesService.getDeviceTypes().subscribe({next:i=>{this.deviceTypes=i.deviceTypes.map(e=>({type:e})),this.loading=!1},error:i=>{this.loading=!1,this._messagesService.add({severity:"error",summary:"Error",detail:i.message})}})}ngOnDestroy(){this._deviceTypesSubscription?.unsubscribe()}static \u0275fac=function(e){return new(e||t)(a(R),a(y))};static \u0275cmp=n({type:t,selectors:[["app-device-types-table"]],standalone:!0,features:[b],decls:1,vars:3,consts:[[3,"columns","data","loading"]],template:function(e,o){e&1&&d(0,"app-table",0),e&2&&f("columns",o.columns)("data",o.deviceTypes)("loading",o.loading)},dependencies:[P],encapsulation:2})};var T=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=n({type:t,selectors:[["app-devices-page"]],decls:6,vars:0,consts:[[1,"mt-2"],["title","Devices","icon","pi-list"],["title","Device types","icon","pi-list"]],template:function(e,o){e&1&&(l(0,"div",0)(1,"app-panel",1),d(2,"app-devices-table"),m()(),l(3,"div",0)(4,"app-panel",2),d(5,"app-device-types-table"),m()())},dependencies:[r,c,D],encapsulation:2})};var E=[{path:"",component:T}],h=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=u({type:t});static \u0275inj=v({imports:[_.forChild(E),_]})};var w=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=u({type:t});static \u0275inj=v({imports:[g,h,r,c,D]})};export{w as DevicesModule};
