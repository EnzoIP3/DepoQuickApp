import{b as $,c as J}from"./chunk-4Q7GM64F.js";import{a as Ue}from"./chunk-UF6I3TVD.js";import{a as z}from"./chunk-L6TZS5FK.js";import{e as Ze}from"./chunk-6ZQIWECF.js";import{a as de,b as ue}from"./chunk-FBSXW3BF.js";import{a as We}from"./chunk-OQ6TPHBS.js";import{a as K}from"./chunk-MJ2XE647.js";import{a as Y}from"./chunk-DMCPYU7V.js";import{a as Qe}from"./chunk-KW7F2QVL.js";import{a as Be}from"./chunk-SLUHDBGA.js";import"./chunk-P47V3DL4.js";import{a as fe}from"./chunk-FFVHMX5G.js";import{a as Ge}from"./chunk-U64QIMIT.js";import"./chunk-XPYDWX67.js";import{a as ce}from"./chunk-3VIG4VHP.js";import{$a as Re,Aa as S,C as ee,Ca as B,Cb as le,D as _e,Da as ye,Db as De,Eb as Ve,Fa as be,Fb as q,Jb as Ne,K as r,L as u,Lb as me,Ma as we,O as Ce,Oa as Ie,Ob as Fe,Pb as He,Qa as Z,Ra as F,Rb as Pe,S as te,T as g,Tb as je,U as h,Ub as Le,V as a,Wa as xe,Wb as pe,Xa as se,Ya as Oe,Z as V,Za as R,_a as Se,aa as m,ab as w,ba as p,ca as f,da as v,ea as y,fa as ie,ga as b,ha as _,ia as l,kb as ae,lb as re,na as Te,nb as Q,o as x,oa as ne,ob as Ae,pa as H,pb as G,qa as P,r as ge,ra as ve,rb as ke,s as C,sa as N,t as O,ta as oe,tb as Ee,wa as j,x as c,xa as L,y as d,ya as U,yb as Me,zb as W}from"./chunk-2GDBKQSI.js";var A=(t,o)=>localStorage.getItem("user")===null?ge(W).parseUrl("/login"):!0;var ze=["container"],Ke=t=>[t,"p-toast-message"],Xe=(t,o,e,i)=>({showTransformParams:t,hideTransformParams:o,showTransitionParams:e,hideTransitionParams:i}),et=t=>({value:"visible",params:t}),tt=(t,o)=>({$implicit:t,closeFn:o}),it=t=>({$implicit:t});function nt(t,o){t&1&&ie(0)}function ot(t,o){if(t&1&&(v(0),g(1,nt,1,0,"ng-container",4),y()),t&2){let e=l();r(),a("ngTemplateOutlet",e.headlessTemplate)("ngTemplateOutletContext",ye(2,tt,e.message,e.onCloseIconClick))}}function st(t,o){if(t&1&&f(0,"span"),t&2){let e=l(3);V("p-toast-message-icon pi "+e.message.icon)}}function at(t,o){t&1&&f(0,"CheckIcon"),t&2&&h("aria-hidden",!0)("data-pc-section","icon")}function rt(t,o){t&1&&f(0,"InfoCircleIcon"),t&2&&h("aria-hidden",!0)("data-pc-section","icon")}function lt(t,o){t&1&&f(0,"TimesCircleIcon"),t&2&&h("aria-hidden",!0)("data-pc-section","icon")}function mt(t,o){t&1&&f(0,"ExclamationTriangleIcon"),t&2&&h("aria-hidden",!0)("data-pc-section","icon")}function pt(t,o){if(t&1&&(m(0,"span",13),v(1),g(2,at,1,2,"CheckIcon",6)(3,rt,1,2,"InfoCircleIcon",6)(4,lt,1,2,"TimesCircleIcon",6)(5,mt,1,2,"ExclamationTriangleIcon",6),y(),p()),t&2){let e=l(3);h("aria-hidden",!0)("data-pc-section","icon"),r(2),a("ngIf",e.message.severity==="success"),r(),a("ngIf",e.message.severity==="info"),r(),a("ngIf",e.message.severity==="error"),r(),a("ngIf",e.message.severity==="warn")}}function ct(t,o){if(t&1&&(v(0),g(1,st,1,2,"span",8)(2,pt,6,6,"span",9),m(3,"div",10)(4,"div",11),N(5),p(),m(6,"div",12),N(7),p()(),y()),t&2){let e=l(2);r(),a("ngIf",e.message.icon),r(),a("ngIf",!e.message.icon),r(),h("data-pc-section","text"),r(),h("data-pc-section","summary"),r(),oe(e.message.summary),r(),h("data-pc-section","detail"),r(),oe(e.message.detail)}}function dt(t,o){t&1&&ie(0)}function ut(t,o){if(t&1&&f(0,"span"),t&2){let e=l(3);V("pt-1 text-base p-toast-message-icon pi "+e.message.closeIcon)}}function ft(t,o){t&1&&f(0,"TimesIcon",16),t&2&&(a("styleClass","p-toast-icon-close-icon"),h("aria-hidden",!0)("data-pc-section","closeicon"))}function ht(t,o){if(t&1){let e=b();m(0,"button",14),_("click",function(n){c(e);let s=l(2);return d(s.onCloseIconClick(n))})("keydown.enter",function(n){c(e);let s=l(2);return d(s.onCloseIconClick(n))}),g(1,ut,1,2,"span",8)(2,ft,1,3,"TimesIcon",15),p()}if(t&2){let e=l(2);h("aria-label",e.closeAriaLabel)("data-pc-section","closebutton"),r(),a("ngIf",e.message.closeIcon),r(),a("ngIf",!e.message.closeIcon)}}function gt(t,o){if(t&1&&(m(0,"div",5),g(1,ct,8,7,"ng-container",6)(2,dt,1,0,"ng-container",4)(3,ht,3,4,"button",7),p()),t&2){let e=l();a("ngClass",e.message==null?null:e.message.contentStyleClass),h("data-pc-section","content"),r(),a("ngIf",!e.template),r(),a("ngTemplateOutlet",e.template)("ngTemplateOutletContext",B(6,it,e.message)),r(),a("ngIf",(e.message==null?null:e.message.closable)!==!1)}}function _t(t,o){if(t&1){let e=b();m(0,"p-toastItem",3),_("onClose",function(n){c(e);let s=l();return d(s.onMessageClose(n))})("@toastAnimation.start",function(n){c(e);let s=l();return d(s.onAnimationStart(n))})("@toastAnimation.done",function(n){c(e);let s=l();return d(s.onAnimationEnd(n))}),p()}if(t&2){let e=o.$implicit,i=o.index,n=l();a("message",e)("index",i)("life",n.life)("template",n.template)("headlessTemplate",n.headlessTemplate)("@toastAnimation",void 0)("showTransformOptions",n.showTransformOptions)("hideTransformOptions",n.hideTransformOptions)("showTransitionOptions",n.showTransitionOptions)("hideTransitionOptions",n.hideTransitionOptions)}}var Ct=(()=>{class t{zone;config;message;index;life;template;headlessTemplate;showTransformOptions;hideTransformOptions;showTransitionOptions;hideTransitionOptions;onClose=new ee;containerViewChild;timeout;constructor(e,i){this.zone=e,this.config=i}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message?.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message?.life||this.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick=e=>{this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),e.preventDefault()};get closeAriaLabel(){return this.config.translation.aria?this.config.translation.aria.close:void 0}ngOnDestroy(){this.clearTimeout()}static \u0275fac=function(i){return new(i||t)(u(_e),u(me))};static \u0275cmp=C({type:t,selectors:[["p-toastItem"]],viewQuery:function(i,n){if(i&1&&ne(ze,5),i&2){let s;H(s=P())&&(n.containerViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{message:"message",index:[2,"index","index",F],life:[2,"life","life",F],template:"template",headlessTemplate:"headlessTemplate",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},features:[te],decls:5,vars:18,consts:[["container",""],["notHeadless",""],["role","alert","aria-live","assertive","aria-atomic","true",3,"mouseenter","mouseleave","ngClass"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"class",4,"ngIf"],["class","p-toast-message-icon",4,"ngIf"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],[1,"p-toast-message-icon"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[3,"styleClass",4,"ngIf"],[3,"styleClass"]],template:function(i,n){if(i&1){let s=b();m(0,"div",2,0),_("mouseenter",function(){return c(s),d(n.onMouseEnter())})("mouseleave",function(){return c(s),d(n.onMouseLeave())}),g(2,ot,2,5,"ng-container",3)(3,gt,4,8,"ng-template",null,1,we),p()}if(i&2){let s=ve(4);V(n.message==null?null:n.message.styleClass),a("ngClass",B(9,Ke,"p-toast-message-"+(n.message==null?null:n.message.severity)))("@messageState",B(16,et,be(11,Xe,n.showTransformOptions,n.hideTransformOptions,n.showTransitionOptions,n.hideTransitionOptions))),h("id",n.message==null?null:n.message.id)("data-pc-name","toast")("data-pc-section","root"),r(2),a("ngIf",n.headlessTemplate)("ngIfElse",s)}},dependencies:()=>[se,R,Re,je,ce,ue,fe,de,pe],encapsulation:2,data:{animation:[ae("messageState",[Ae("visible",Q({transform:"translateY(0)",opacity:1})),G("void => *",[Q({transform:"{{showTransformParams}}",opacity:0}),re("{{showTransitionParams}}")]),G("* => void",[re("{{hideTransitionParams}}",Q({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0})}return t})(),Ye=(()=>{class t{document;renderer;messageService;cd;config;key;autoZIndex=!0;baseZIndex=0;life=3e3;style;styleClass;get position(){return this._position}set position(e){this._position=e,this.cd.markForCheck()}preventOpenDuplicates=!1;preventDuplicates=!1;showTransformOptions="translateY(100%)";hideTransformOptions="translateY(-100%)";showTransitionOptions="300ms ease-out";hideTransitionOptions="250ms ease-in";breakpoints;onClose=new ee;containerViewChild;templates;messageSubscription;clearSubscription;messages;messagesArchieve;template;headlessTemplate;_position="top-right";constructor(e,i,n,s,I){this.document=e,this.renderer=i,this.messageService=n,this.cd=s,this.config=I}styleElement;id=Ve();ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e)if(Array.isArray(e)){let i=e.filter(n=>this.canAdd(n));this.add(i)}else this.canAdd(e)&&this.add([e])}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.breakpoints&&this.createStyle()}add(e){this.messages=this.messages?[...this.messages,...e]:[...e],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,...e]:[...e]),this.cd.markForCheck()}canAdd(e){let i=this.key===e.key;return i&&this.preventOpenDuplicates&&(i=!this.containsMessage(this.messages,e)),i&&this.preventDuplicates&&(i=!this.containsMessage(this.messagesArchieve,e)),i}containsMessage(e,i){return e?e.find(n=>n.summary===i.summary&&n.detail==i.detail&&n.severity===i.severity)!=null:!1}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"message":this.template=e.template;break;case"headless":this.headlessTemplate=e.template;break;default:this.template=e.template;break}})}onMessageClose(e){this.messages?.splice(e.index,1),this.onClose.emit({message:e.message}),this.cd.detectChanges()}onAnimationStart(e){e.fromState==="void"&&(this.renderer.setAttribute(this.containerViewChild?.nativeElement,this.id,""),this.autoZIndex&&this.containerViewChild?.nativeElement.style.zIndex===""&&q.set("modal",this.containerViewChild?.nativeElement,this.baseZIndex||this.config.zIndex.modal))}onAnimationEnd(e){e.toState==="void"&&this.autoZIndex&&De.isEmpty(this.messages)&&q.clear(this.containerViewChild?.nativeElement)}createStyle(){if(!this.styleElement){this.styleElement=this.renderer.createElement("style"),this.styleElement.type="text/css",Pe.setAttribute(this.styleElement,"nonce",this.config?.csp()?.nonce),this.renderer.appendChild(this.document.head,this.styleElement);let e="";for(let i in this.breakpoints){let n="";for(let s in this.breakpoints[i])n+=s+":"+this.breakpoints[i][s]+" !important;";e+=`
                    @media screen and (max-width: ${i}) {
                        .p-toast[${this.id}] {
                           ${n}
                        }
                    }
                `}this.renderer.setProperty(this.styleElement,"innerHTML",e)}}destroyStyle(){this.styleElement&&(this.renderer.removeChild(this.document.head,this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&q.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}static \u0275fac=function(i){return new(i||t)(u(xe),u(Ce),u(Ne),u(Ie),u(me))};static \u0275cmp=C({type:t,selectors:[["p-toast"]],contentQueries:function(i,n,s){if(i&1&&Te(s,Fe,4),i&2){let I;H(I=P())&&(n.templates=I)}},viewQuery:function(i,n){if(i&1&&ne(ze,5),i&2){let s;H(s=P())&&(n.containerViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{key:"key",autoZIndex:[2,"autoZIndex","autoZIndex",Z],baseZIndex:[2,"baseZIndex","baseZIndex",F],life:[2,"life","life",F],style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:[2,"preventOpenDuplicates","preventOpenDuplicates",Z],preventDuplicates:[2,"preventDuplicates","preventDuplicates",Z],showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},features:[te],decls:3,vars:5,consts:[["container",""],[1,"p-toast","p-component",3,"ngClass","ngStyle"],[3,"message","index","life","template","headlessTemplate","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"onClose","message","index","life","template","headlessTemplate","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions"]],template:function(i,n){i&1&&(m(0,"div",1,0),g(2,_t,1,10,"p-toastItem",2),p()),i&2&&(V(n.styleClass),a("ngClass","p-toast-"+n._position)("ngStyle",n.style),r(2),a("ngForOf",n.messages))},dependencies:[se,Oe,Se,Ct],styles:[`@layer primeng{.p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translate(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translate(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative;flex:none}.p-toast-icon-close.p-link{cursor:pointer}}
`],encapsulation:2,data:{animation:[ae("toastAnimation",[G(":enter, :leave",[Ee("@*",ke())])])]},changeDetection:0})}return t})(),$e=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=O({type:t});static \u0275inj=x({imports:[w,Le,ce,ue,fe,de,pe,He]})}return t})();var E=class t{position="bottom-right";life=1e4;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=C({type:t,selectors:[["app-toast"]],inputs:{position:"position",life:"life"},standalone:!0,features:[S],decls:1,vars:2,consts:[[3,"position","life"]],template:function(e,i){e&1&&f(0,"p-toast",0),e&2&&a("position",i.position)("life",i.life)},dependencies:[$e,Ye],encapsulation:2})};function bt(t,o){if(t&1){let e=b();v(0),m(1,"app-button",1),_("click",function(){c(e);let n=l();return d(n.showConfirmationDialog=!0)}),p(),m(2,"app-dialog",2),U("visibleChange",function(n){c(e);let s=l();return L(s.showConfirmationDialog,n)||(s.showConfirmationDialog=n),d(n)}),m(3,"p"),N(4,"Are you sure you want to become a home owner?"),p(),m(5,"div",3)(6,"app-button",4),_("click",function(){c(e);let n=l();return d(n.addHomeOwnerRole())}),p(),m(7,"app-button",5),_("click",function(){c(e);let n=l();return d(n.showConfirmationDialog=!1)}),p()()(),y()}if(t&2){let e=l();r(),a("disabled",e.loading),r(),j("visible",e.showConfirmationDialog)}}var M=class t{constructor(o,e,i){this._authService=o;this._usersService=e;this._messagesService=i}user=null;loading=!1;canAddHomeOwnerRole=!1;showConfirmationDialog=!1;ngOnInit(){this._authService.userLogged.subscribe(o=>{this.user=o,o&&this._checkIfCanAddHomeOwnerRole(o)})}_checkIfCanAddHomeOwnerRole(o){let e=!Object.keys(o.roles).includes("HomeOwner");this.canAddHomeOwnerRole=e}addHomeOwnerRole(){this.loading=!0,this._usersService.addHomeOwnerRole().subscribe({next:o=>{this._authService.setRoles(o.roles),this.loading=!1},error:o=>{this._messagesService.add({severity:"error",summary:"Error",detail:o.message}),this.loading=!1}})}static \u0275fac=function(e){return new(e||t)(u(z),u(Qe),u(Ge))};static \u0275cmp=C({type:t,selectors:[["app-add-home-owner-role-button"]],standalone:!0,features:[S],decls:1,vars:1,consts:[[4,"ngIf"],["label","Become Home Owner","icon","pi pi-user-plus",3,"click","disabled"],["title","Confirmation",3,"visibleChange","visible"],[1,"flex","flex-row","gap-2"],["label","Confirm",3,"click"],["label","Cancel","severity","danger",3,"click"]],template:function(e,i){e&1&&g(0,bt,8,2,"ng-container",0),e&2&&a("ngIf",i.canAddHomeOwnerRole)},dependencies:[w,R,Be,Ze],encapsulation:2})};function xt(t,o){if(t&1){let e=b();v(0),m(1,"app-dropdown",1),_("change",function(n){c(e);let s=l();return d(s.onRoleChange(n))}),p(),y()}if(t&2){let e=l();r(),a("options",e.roles)("value",e.selectedRole)}}var D=class t{constructor(o,e){this._authService=o;this._router=e}user=null;canSwitchRoles=!1;roles=[];selectedRole=null;ngOnInit(){this._authService.userLogged.subscribe(o=>{this.user=o,o&&(this._checkUserRoleCount(o),this._setRoles(o),this._setSelectedRole(o))})}_checkUserRoleCount(o){o&&Object.keys(o.roles).length>1&&(this.canSwitchRoles=!0)}_setRoles(o){this.roles=Object.keys(o.roles).map(e=>({value:e,label:e}))}_setSelectedRole(o){this.selectedRole=o.currentRole}onRoleChange(o){this._authService.switchCurrentRole(o),this._router.navigate(["/"])}static \u0275fac=function(e){return new(e||t)(u(z),u(W))};static \u0275cmp=C({type:t,selectors:[["app-role-dropdown"]],standalone:!0,features:[S],decls:1,vars:1,consts:[[4,"ngIf"],[3,"change","options","value"]],template:function(e,i){e&1&&g(0,xt,2,2,"ng-container",0),e&2&&a("ngIf",i.canSwitchRoles)},dependencies:[w,R,We],encapsulation:2})};var T=class t{title="HomeConnect";sidebarVisible=!1;openSidebar(){this.sidebarVisible=!0}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=C({type:t,selectors:[["app-home-page"]],decls:7,vars:2,consts:[[1,"m-2"],[3,"sidebarVisibleChange","sidebarVisible"],[3,"onClick","title"]],template:function(e,i){e&1&&(f(0,"app-toast"),m(1,"div",0)(2,"app-permission-sidebar",1),U("sidebarVisibleChange",function(s){return L(i.sidebarVisible,s)||(i.sidebarVisible=s),s}),p(),m(3,"app-toolbar",2),_("onClick",function(){return i.openSidebar()}),f(4,"app-add-home-owner-role-button")(5,"app-role-dropdown"),p(),f(6,"router-outlet"),p()),e&2&&(r(2),j("sidebarVisible",i.sidebarVisible),r(),a("title",i.title))},dependencies:[Me,$,J,E,M,D],encapsulation:2})};var St=[{path:"",component:T,canActivate:[Ue],loadChildren:()=>import("./chunk-TWELO5Q4.js").then(t=>t.AuthModule)},{path:"devices",component:T,canActivate:[A],loadChildren:()=>import("./chunk-KUFJSRPL.js").then(t=>t.DevicesModule)},{path:"homes",component:T,canActivate:[A,K],data:{permissions:[Y.CREATE_HOME]},loadChildren:()=>import("./chunk-TOIAXT2U.js").then(t=>t.HomesModule)},{path:"businesses",component:T,canActivate:[A,K],data:{permissions:[Y.CREATE_BUSINESS]},loadChildren:()=>import("./chunk-BSZP3UV5.js").then(t=>t.BusinessesModule)},{path:"notifications",component:T,canActivate:[A,K],data:{permissions:[Y.GET_NOTIFICATIONS]},loadChildren:()=>import("./chunk-NDTWHSN3.js").then(t=>t.NotificationsModule)},{path:"admins",component:T,canActivate:[A],loadChildren:()=>import("./chunk-YFPIREXC.js").then(t=>t.AdminsModule)}],X=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=O({type:t});static \u0275inj=x({imports:[le.forChild(St),le]})};var Je=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=O({type:t});static \u0275inj=x({imports:[w,X,$,J,E,M,D]})};export{Je as RootModule};
