import{d as P}from"./chunk-BSANHALT.js";import{a as I}from"./chunk-CPWWQRJC.js";import{c as M,f as N}from"./chunk-MQS2OHBC.js";import"./chunk-TDDMEX7Y.js";import{e as y}from"./chunk-QQ367BQP.js";import"./chunk-6ZQIWECF.js";import"./chunk-P47V3DL4.js";import{a as b}from"./chunk-U64QIMIT.js";import"./chunk-XPYDWX67.js";import"./chunk-3VIG4VHP.js";import{Aa as f,Cb as S,L as r,V as u,a as s,aa as p,ab as g,ba as m,ca as l,ha as _,o as d,s as n,t as v}from"./chunk-2GDBKQSI.js";var a=class t{constructor(i,e){this._devicesService=i;this._messagesService=e}columns=[{field:"mainPhoto",header:"Photo"},{field:"secondaryPhotos",header:"Other Photos"},{field:"name",header:"Name"},{field:"businessName",header:"Business Name"},{field:"type",header:"Type"},{field:"modelNumber",header:"Model Number"}];filterableColumns=["name","type","modelNumber","businessName"];_devicesSubscription=null;devices=[];pagination=null;filters={};loading=!0;selectedDevice=null;dialogVisible=!1;ngOnInit(){this._subscribeToDevices()}onPageChange(i){this.loading=!0,this._subscribeToDevices(s(s({},i),this.filters))}onFilterChange(i){this.filters=i,this._subscribeToDevices(s(s({},this.pagination),i))}ngOnDestroy(){this._devicesSubscription?.unsubscribe()}_subscribeToDevices(i){this._devicesSubscription=this._devicesService.getDevices(i?s({},i):{}).subscribe({next:e=>{this.devices=e.devices,this.pagination=e.pagination,this.loading=!1},error:e=>{this.loading=!1,this._messagesService.add({severity:"error",summary:"Error",detail:e.message})}})}onRowClick(i){this.selectedDevice=i}static \u0275fac=function(e){return new(e||t)(r(N),r(b))};static \u0275cmp=n({type:t,selectors:[["app-devices-table"]],standalone:!0,features:[f],decls:1,vars:6,consts:[[3,"rowClick","pageChange","clickableRows","columns","devices","loading","pagination","selectedDevice"]],template:function(e,o){e&1&&(p(0,"app-base-devices-table",0),_("rowClick",function(h){return o.onRowClick(h)})("pageChange",function(h){return o.onPageChange(h)}),m()),e&2&&u("clickableRows",!0)("columns",o.columns)("devices",o.devices)("loading",o.loading)("pagination",o.pagination)("selectedDevice",o.selectedDevice)},dependencies:[g,P],encapsulation:2})};var c=class t{constructor(i,e){this._deviceTypesService=i;this._messagesService=e}columns=[{field:"type",header:"Type"}];_deviceTypesSubscription=null;deviceTypes=[];loading=!0;ngOnInit(){this._deviceTypesSubscription=this._deviceTypesService.getDeviceTypes().subscribe({next:i=>{this.deviceTypes=i.deviceTypes.map(e=>({type:e})),this.loading=!1},error:i=>{this.loading=!1,this._messagesService.add({severity:"error",summary:"Error",detail:i.message})}})}ngOnDestroy(){this._deviceTypesSubscription?.unsubscribe()}static \u0275fac=function(e){return new(e||t)(r(I),r(b))};static \u0275cmp=n({type:t,selectors:[["app-device-types-table"]],standalone:!0,features:[f],decls:1,vars:3,consts:[[3,"columns","data","loading"]],template:function(e,o){e&1&&l(0,"app-table",0),e&2&&u("columns",o.columns)("data",o.deviceTypes)("loading",o.loading)},dependencies:[M],encapsulation:2})};var C=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=n({type:t,selectors:[["app-devices-page"]],decls:6,vars:0,consts:[[1,"mt-2"],["title","Devices","icon","pi-list"],["title","Device types","icon","pi-list"]],template:function(e,o){e&1&&(p(0,"div",0)(1,"app-panel",1),l(2,"app-devices-table"),m()(),p(3,"div",0)(4,"app-panel",2),l(5,"app-device-types-table"),m()())},dependencies:[a,c,y],encapsulation:2})};var E=[{path:"",component:C}],T=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=v({type:t});static \u0275inj=d({imports:[S.forChild(E),S]})};var O=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=v({type:t});static \u0275inj=d({imports:[g,T,a,c,y]})};export{O as DevicesModule};
